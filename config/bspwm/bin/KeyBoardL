#!/bin/sh

# Get the current layout
CURRENT=$(setxkbmap -query | awk '/layout/ {print $2}')

# Set default layout to English if not set or empty
if [ -z "$CURRENT" ] || [ "$CURRENT" = "" ]; then
    setxkbmap us
    CURRENT="us"
fi

# Simple layout switching: RU -> UA -> US -> RU
case "$CURRENT" in
    "ru")
        setxkbmap ua
        dunstify -r 12345 -i ~/.config/bspwm/src/assets/keyboard.svg "Keyboard Layout" "UA"
        ;;
    "ua")
        setxkbmap us
        dunstify -r 12345 -i ~/.config/bspwm/src/assets/keyboard.svg "Keyboard Layout" "US"
        ;;
    "us")
        setxkbmap ru
        dunstify -r 12345 -i ~/.config/bspwm/src/assets/keyboard.svg "Keyboard Layout" "RU"
        ;;
    *)
        setxkbmap us
        dunstify -r 12345 -i ~/.config/bspwm/src/assets/keyboard.svg "Keyboard Layout" "US"
        ;;
esac
